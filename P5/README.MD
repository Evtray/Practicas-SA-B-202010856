# üè™ E-Commerce Microservices System

**Universidad San Carlos de Guatemala**
**Facultad de Ingenier√≠a**
**Software Avanzado - Pr√°ctica 5**
**Estudiante**: Edwin Sandoval Lopez
**Carn√©**: 202010856

## üìã Descripci√≥n del Proyecto

Sistema completo de comercio electr√≥nico construido con arquitectura de microservicios moderna, utilizando Docker para orquestaci√≥n, GraphQL para servicios avanzados, y API Gateway para enrutamiento inteligente. El sistema implementa las mejores pr√°cticas de desarrollo distribuido, incluyendo separaci√≥n de responsabilidades, escalabilidad horizontal, y comunicaci√≥n eficiente entre servicios.

### Caracter√≠sticas Principales

- ‚úÖ **Arquitectura de Microservicios**: Servicios independientes y desacoplados
- ‚úÖ **API Gateway**: Punto de entrada √∫nico con enrutamiento inteligente
- ‚úÖ **GraphQL & REST**: Soporte para ambos paradigmas de API
- ‚úÖ **Containerizaci√≥n**: Docker y Docker Compose para desarrollo y despliegue
- ‚úÖ **Escalabilidad**: Servicios horizontalmente escalables
- ‚úÖ **Monitoreo**: Health checks y logging integrado
- ‚úÖ **Documentaci√≥n**: APIs completamente documentadas
- ‚úÖ **Testing**: Endpoints listos para pruebas automatizadas

## üèóÔ∏è Arquitectura del Sistema

### Diagrama de Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        API Gateway (Port 3000)                  ‚îÇ
‚îÇ                     Node.js + Express + Proxy                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ               ‚îÇ               ‚îÇ
                 ‚ñº               ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  User Service   ‚îÇ ‚îÇ   Product   ‚îÇ ‚îÇ   Order     ‚îÇ ‚îÇ Analytics   ‚îÇ
‚îÇ                 ‚îÇ ‚îÇ   Service   ‚îÇ ‚îÇ   Service   ‚îÇ ‚îÇ  Service    ‚îÇ
‚îÇ Node.js+Express ‚îÇ ‚îÇPython+FastAPI‚îÇ ‚îÇNode.js+Apollo‚îÇ ‚îÇPython+Graphene‚îÇ
‚îÇ    Port 3001    ‚îÇ ‚îÇ  Port 3002  ‚îÇ ‚îÇ  Port 3003  ‚îÇ ‚îÇ  Port 3004  ‚îÇ
‚îÇ      REST       ‚îÇ ‚îÇ    REST     ‚îÇ ‚îÇ   GraphQL   ‚îÇ ‚îÇ   GraphQL   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îò‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                   ‚îÇ               ‚îÇ               ‚îÇ
         ‚ñº                   ‚ñº               ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   In-Memory     ‚îÇ ‚îÇ In-Memory   ‚îÇ ‚îÇ In-Memory   ‚îÇ ‚îÇ In-Memory   ‚îÇ
‚îÇ   User Store    ‚îÇ ‚îÇProduct Store‚îÇ ‚îÇOrder & Cart ‚îÇ ‚îÇAnalytics DB ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Microservicios Detallados

| Servicio | Tecnolog√≠a | Puerto | Protocolo | Descripci√≥n | Endpoints Principales |
|----------|-----------|--------|-----------|-------------|----------------------|
| **User Service** | Node.js + Express | 3001 | REST | Gesti√≥n completa de usuarios, autenticaci√≥n y autorizaci√≥n | `/api/users/*`, `/health` |
| **Product Service** | Python + FastAPI | 3002 | REST | Cat√°logo de productos con gesti√≥n de inventario y categor√≠as | `/api/products/*`, `/docs` |
| **Order Service** | Node.js + Apollo | 3003 | GraphQL | Gesti√≥n avanzada de pedidos y carritos de compra | `/graphql`, `/health` |
| **Analytics Service** | Python + Graphene | 3004 | GraphQL | An√°lisis de ventas, reportes y estad√≠sticas de negocio | `/graphql`, `/docs` |
| **API Gateway** | Node.js + Express | 3000 | REST/GraphQL | Enrutamiento inteligente, balanceador de carga y proxy | `/health`, `/`, `/graphql` |

## ‚ö° Gu√≠a de Inicio R√°pido

### Prerrequisitos del Sistema

- **Docker**: versi√≥n 24.0+ con Docker Compose v2
- **Node.js**: versi√≥n 18+ (para desarrollo local)
- **Python**: versi√≥n 3.11+ (para desarrollo local)
- **Git**: para clonar el repositorio
- **Postman/Insomnia**: para pruebas de API (opcional)

### üöÄ Instalaci√≥n y Despliegue con Docker

#### Paso 1: Clonar y Preparar el Proyecto
```bash
# Clonar el repositorio
git clone https://github.com/tu-usuario/Practicas-SA-B-202010856.git
cd Practicas-SA-B-202010856/P5

# Verificar estructura del proyecto
ls -la
```

#### Paso 2: Desplegar Todos los Servicios
```bash
# Construir e iniciar todos los servicios
docker-compose up --build -d

# Verificar que todos los servicios est√©n corriendo
docker-compose ps

# Ver logs en tiempo real
docker-compose logs -f

# Ver logs de un servicio espec√≠fico
docker-compose logs -f user-service
```

#### Paso 3: Verificar el Despliegue
```bash
# Verificar API Gateway
curl http://localhost:3000/health

# Verificar todos los servicios
curl http://localhost:3001/health  # User Service
curl http://localhost:3002/health  # Product Service
curl http://localhost:3003/health  # Order Service
curl http://localhost:3004/health  # Analytics Service
```

### üõ†Ô∏è Desarrollo Local (Sin Docker)

#### Configuraci√≥n de Servicios Node.js
```bash
# User Service
cd user-service
npm install
npm start  # Puerto 3001

# Order Service (en nueva terminal)
cd order-service
npm install
npm start  # Puerto 3003

# API Gateway (en nueva terminal)
cd api-gateway
npm install
npm start  # Puerto 3000
```

#### Configuraci√≥n de Servicios Python
```bash
# Product Service (en nueva terminal)
cd product-service
pip install -r requirements.txt
python main.py  # Puerto 3002

# Analytics Service (en nueva terminal)
cd analytics-service
pip install -r requirements.txt
python main.py  # Puerto 3004
```

#### Variables de Entorno para Desarrollo
```bash
# Crear archivos .env en cada servicio seg√∫n sea necesario
# user-service/.env
echo "PORT=3001" > user-service/.env
echo "NODE_ENV=development" >> user-service/.env

# product-service/.env
echo "PORT=3002" > product-service/.env
echo "ENVIRONMENT=development" >> product-service/.env
```

## üìç Endpoints y APIs Disponibles

### üåê API Gateway (http://localhost:3000)

| Endpoint | M√©todo | Descripci√≥n | Destino |
|----------|--------|-------------|---------|
| `/health` | GET | Estado completo del sistema | Gateway |
| `/` | GET | Informaci√≥n del gateway | Gateway |
| `/api/users/*` | ALL | Proxy a User Service | User Service |
| `/api/products/*` | ALL | Proxy a Product Service | Product Service |
| `/orders/graphql` | POST | GraphQL para pedidos | Order Service |
| `/analytics/graphql` | POST | GraphQL para analytics | Analytics Service |
| `/graphql` | POST | GraphQL unificado (auto-routing) | Multiple Services |

### üë§ User Service REST API (http://localhost:3001)

| Endpoint | M√©todo | Descripci√≥n | Body/Params |
|----------|--------|-------------|-------------|
| `/health` | GET | Estado del servicio | - |
| `/api/users` | GET | Listar todos los usuarios | - |
| `/api/users/:id` | GET | Obtener usuario por ID | - |
| `/api/users/register` | POST | Registrar nuevo usuario | `{email, password, name}` |
| `/api/users/login` | POST | Autenticar usuario | `{email, password}` |
| `/api/users/:id` | PUT | Actualizar usuario | `{name?, email?, role?}` |
| `/api/users/:id` | DELETE | Eliminar usuario | - |

### üõçÔ∏è Product Service REST API (http://localhost:3002)

| Endpoint | M√©todo | Descripci√≥n | Query Params/Body |
|----------|--------|-------------|-------------------|
| `/health` | GET | Estado del servicio | - |
| `/docs` | GET | Documentaci√≥n Swagger | - |
| `/api/products` | GET | Listar productos | `?skip=0&limit=100&category=Electronics` |
| `/api/products/:id` | GET | Obtener producto por ID | - |
| `/api/products` | POST | Crear nuevo producto | `{name, description, price, category, stock}` |
| `/api/products/:id` | PUT | Actualizar producto | `{name?, description?, price?, stock?}` |
| `/api/products/:id` | DELETE | Eliminar producto | - |
| `/api/products/category/:category` | GET | Productos por categor√≠a | - |
| `/api/products/:id/stock` | PATCH | Actualizar stock | `?quantity=N` |

### üõí Order Service GraphQL (http://localhost:3003/graphql)

#### Queries Disponibles
```graphql
# Obtener pedidos de un usuario
orders(userId: String): [Order!]!

# Obtener pedido espec√≠fico
order(id: ID!): Order

# Obtener carrito de usuario
cart(userId: String!): Cart
```

#### Mutations Disponibles
```graphql
# Crear nuevo pedido
createOrder(userId: String!, items: [OrderItemInput!]!): Order!

# Actualizar estado de pedido
updateOrderStatus(id: ID!, status: OrderStatus!): Order

# Agregar al carrito
addToCart(userId: String!, item: CartItemInput!): Cart!

# Remover del carrito
removeFromCart(userId: String!, productId: String!): Cart!

# Procesar checkout
checkout(userId: String!): Order!
```

### üìä Analytics Service GraphQL (http://localhost:3004/graphql)

#### Queries de An√°lisis
```graphql
# Reporte de ventas por per√≠odo
salesReport(startDate: String, endDate: String): SalesReport

# Todos los reportes de ventas
salesReports: [SalesReport]

# Productos m√°s vendidos
topProducts(limit: Int = 10): [ProductStats]

# Estad√≠sticas de usuario espec√≠fico
userStatistics(userId: String): UserStatistics

# Estad√≠sticas de todos los usuarios
allUserStatistics: [UserStatistics]

# Ingresos por categor√≠a
revenueByCategory: [CategoryRevenue]
```

#### Mutations de Reportes
```graphql
# Generar nuevo reporte
generateReport(
  reportType: String!
  startDate: String
  endDate: String
  params: String
): ReportGenerationResult
```

## üê≥ Gesti√≥n con Docker

### Comandos de Construcci√≥n y Despliegue
```bash
# Construir todas las im√°genes desde cero
docker-compose build --no-cache

# Construir e iniciar servicios
docker-compose up --build -d

# Construir servicio espec√≠fico
docker-compose build user-service

# Reconstruir y reiniciar servicio espec√≠fico
docker-compose up --build -d user-service
```

### Comandos de Gesti√≥n y Monitoreo
```bash
# Ver estado de todos los servicios
docker-compose ps

# Ver logs de todos los servicios
docker-compose logs -f

# Ver logs de servicio espec√≠fico
docker-compose logs -f user-service

# Ejecutar comando en contenedor
docker-compose exec user-service bash

# Ver estad√≠sticas de recursos
docker stats
```

### Comandos de Limpieza y Mantenimiento
```bash
# Detener todos los servicios
docker-compose down

# Detener y eliminar vol√∫menes
docker-compose down -v

# Reiniciar servicio espec√≠fico
docker-compose restart user-service

# Escalar horizontalmente un servicio
docker-compose up -d --scale product-service=3

# Limpiar im√°genes no utilizadas
docker image prune -f

# Limpiar sistema completo
docker system prune -af
```

### Comandos de Debugging
```bash
# Inspeccionar contenedor
docker-compose exec user-service env

# Ver configuraci√≥n del compose
docker-compose config

# Seguir logs con timestamps
docker-compose logs -f -t user-service
```

## üß™ Testing y Validaci√≥n

### Suite de Pruebas Completa

#### 1. Verificaci√≥n de Servicios
```bash
# Script de verificaci√≥n r√°pida
#!/bin/bash
echo "üîç Verificando servicios..."

# API Gateway
echo "Gateway:" && curl -s http://localhost:3000/health | jq '.status'

# User Service
echo "Users:" && curl -s http://localhost:3001/health | jq '.status'

# Product Service
echo "Products:" && curl -s http://localhost:3002/health | jq '.status'

# Order Service
echo "Orders:" && curl -s http://localhost:3003/health | jq '.status'

# Analytics Service
echo "Analytics:" && curl -s http://localhost:3004/health | jq '.status'
```

#### 2. Pruebas de API REST
```bash
# === USER SERVICE TESTS ===
# Registrar nuevo usuario
curl -X POST http://localhost:3001/api/users/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "testuser@example.com",
    "password": "securepassword123",
    "name": "Test User"
  }'

# Login de usuario
curl -X POST http://localhost:3001/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "admin123"
  }'

# Listar usuarios
curl http://localhost:3001/api/users

# === PRODUCT SERVICE TESTS ===
# Listar productos
curl http://localhost:3002/api/products

# Crear nuevo producto
curl -X POST http://localhost:3002/api/products \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test Product",
    "description": "A test product for demonstration",
    "price": 99.99,
    "category": "Electronics",
    "stock": 50
  }'

# Filtrar productos por categor√≠a
curl "http://localhost:3002/api/products?category=Electronics&limit=5"
```

#### 3. Pruebas de GraphQL
```bash
# === ORDER SERVICE GRAPHQL ===
# Obtener pedidos de usuario
curl -X POST http://localhost:3003/graphql \
  -H "Content-Type: application/json" \
  -d '{
    "query": "query { orders(userId: \"user1\") { id status total items { productName quantity price } createdAt } }"
  }'

# Agregar producto al carrito
curl -X POST http://localhost:3003/graphql \
  -H "Content-Type: application/json" \
  -d '{
    "query": "mutation { addToCart(userId: \"user1\", item: { productId: \"prod1\", productName: \"Laptop\", quantity: 1, price: 1299.99 }) { total items { productName quantity } } }"
  }'

# === ANALYTICS SERVICE GRAPHQL ===
# Obtener reportes de ventas
curl -X POST http://localhost:3004/graphql \
  -H "Content-Type: application/json" \
  -d '{
    "query": "query { salesReports { id period totalRevenue totalOrders averageOrderValue } }"
  }'

# Productos m√°s vendidos
curl -X POST http://localhost:3004/graphql \
  -H "Content-Type: application/json" \
  -d '{
    "query": "query { topProducts(limit: 5) { productName totalRevenue totalSold conversionRate } }"
  }'
```

#### 4. Pruebas a trav√©s del API Gateway
```bash
# Todas las pruebas anteriores tambi√©n funcionan a trav√©s del gateway
# Solo cambiar el puerto de 3001/3002/3003/3004 a 3000

# Usuario a trav√©s del gateway
curl http://localhost:3000/api/users

# Productos a trav√©s del gateway
curl http://localhost:3000/api/products

# GraphQL de pedidos a trav√©s del gateway
curl -X POST http://localhost:3000/orders/graphql \
  -H "Content-Type: application/json" \
  -d '{"query": "query { orders(userId: \"user1\") { id status total } }"}'

# GraphQL unificado (auto-routing)
curl -X POST http://localhost:3000/graphql \
  -H "Content-Type: application/json" \
  -d '{"query": "query { topProducts(limit: 3) { productName totalRevenue } }"}'
```

### üìã Colecciones de Postman

Puedes encontrar colecciones completas de Postman en:
- `docs/POSTMAN_EXAMPLES.md` - Ejemplos detallados con curl y Postman
- Importa las colecciones JSON para pruebas automatizadas

### üéØ Test Scenarios Recomendados

1. **Flujo Completo de Usuario**:
   - Registro ‚Üí Login ‚Üí Ver productos ‚Üí Agregar al carrito ‚Üí Checkout

2. **Gesti√≥n de Productos**:
   - Crear ‚Üí Listar ‚Üí Actualizar ‚Üí Gestionar stock

3. **An√°lisis de Datos**:
   - Generar reportes ‚Üí Ver estad√≠sticas ‚Üí Analizar rendimiento

4. **Pruebas de Carga**:
   - M√∫ltiples usuarios concurrentes
   - Escalabilidad de servicios

## üìö Documentaci√≥n Completa

### üìñ Documentaci√≥n Principal

| Documento | Descripci√≥n | Ubicaci√≥n |
|-----------|-------------|----------|
| **API Contracts** | Contratos completos de REST y GraphQL | [docs/API_CONTRACTS.md](./docs/API_CONTRACTS.md) |
| **GraphQL Documentation** | Esquemas y ejemplos GraphQL detallados | [docs/GRAPHQL_DOCUMENTATION.md](./docs/GRAPHQL_DOCUMENTATION.md) |
| **Postman Examples** | Colecci√≥n de ejemplos para testing | [docs/POSTMAN_EXAMPLES.md](./docs/POSTMAN_EXAMPLES.md) |
| **Project Design** | Dise√±o y arquitectura del sistema | [PROJECT_DESIGN.md](./PROJECT_DESIGN.md) |
| **Roadmap** | Plan de desarrollo y mejoras | [ROADMAP.md](./ROADMAP.md) |

### üåê Documentaci√≥n Interactiva

| Servicio | Tipo | URL | Descripci√≥n |
|----------|------|-----|-------------|
| **Product Service** | Swagger/OpenAPI | http://localhost:3002/docs | Documentaci√≥n REST interactiva |
| **Product Service** | ReDoc | http://localhost:3002/redoc | Documentaci√≥n REST alternativa |
| **Order Service** | GraphQL Playground | http://localhost:3003/graphql | IDE GraphQL para pedidos |
| **Analytics Service** | GraphQL Endpoint | http://localhost:3004/graphql | API GraphQL para analytics |
| **API Gateway** | Unified GraphQL | http://localhost:3000/graphql | GraphQL unificado |

### üîç Enlaces R√°pidos de Documentaci√≥n

```bash
# Abrir documentaciones en el navegador (macOS)
open http://localhost:3002/docs        # FastAPI Swagger
open http://localhost:3003/graphql     # GraphQL Playground
open http://localhost:3000/            # Gateway Info

# Verificar endpoints de documentaci√≥n
curl http://localhost:3002/docs        # Swagger UI
curl http://localhost:3004/graphql     # GraphQL Schema
```

## üîß Gu√≠a de Desarrollo

### üîê Configuraci√≥n de Variables de Entorno

Cada servicio puede configurarse mediante variables de entorno:

```env
# user-service/.env
PORT=3001
NODE_ENV=development
JWT_SECRET=your-super-secret-jwt-key
DB_URI=postgresql://user:pass@localhost/users  # Para BD real

# product-service/.env
PORT=3002
HOST=0.0.0.0
ENVIRONMENT=development
MONGODB_URI=mongodb://localhost:27017/products  # Para BD real

# order-service/.env
PORT=3003
NODE_ENV=development
USER_SERVICE_URL=http://localhost:3001
PRODUCT_SERVICE_URL=http://localhost:3002

# analytics-service/.env
PORT=3004
HOST=0.0.0.0
ENVIRONMENT=development
USER_SERVICE_URL=http://localhost:3001
ORDER_SERVICE_URL=http://localhost:3003
PRODUCT_SERVICE_URL=http://localhost:3002

# api-gateway/.env
PORT=3000
NODE_ENV=development
USER_SERVICE_URL=http://localhost:3001
PRODUCT_SERVICE_URL=http://localhost:3002
ORDER_SERVICE_URL=http://localhost:3003
ANALYTICS_SERVICE_URL=http://localhost:3004
```

### üìÅ Estructura Detallada del Proyecto

```
P5/                                    # Directorio principal del proyecto
‚îú‚îÄ‚îÄ üìÅ api-gateway/                    # API Gateway - Punto de entrada √∫nico
‚îÇ   ‚îú‚îÄ‚îÄ index.js                      # Servidor principal con proxy inteligente
‚îÇ   ‚îú‚îÄ‚îÄ package.json                  # Dependencias Node.js
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                    # Imagen Docker del gateway
‚îú‚îÄ‚îÄ üìÅ user-service/                   # Servicio de Usuarios (REST)
‚îÇ   ‚îú‚îÄ‚îÄ index.js                      # API REST para gesti√≥n de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ package.json                  # Dependencias Node.js
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                    # Imagen Docker del servicio
‚îú‚îÄ‚îÄ üìÅ product-service/                # Servicio de Productos (REST)
‚îÇ   ‚îú‚îÄ‚îÄ main.py                       # API FastAPI para cat√°logo
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt              # Dependencias Python
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                    # Imagen Docker del servicio
‚îú‚îÄ‚îÄ üìÅ order-service/                  # Servicio de Pedidos (GraphQL)
‚îÇ   ‚îú‚îÄ‚îÄ index.js                      # Servidor Apollo GraphQL
‚îÇ   ‚îú‚îÄ‚îÄ package.json                  # Dependencias Node.js
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                    # Imagen Docker del servicio
‚îú‚îÄ‚îÄ üìÅ analytics-service/              # Servicio de An√°lisis (GraphQL)
‚îÇ   ‚îú‚îÄ‚îÄ main.py                       # API Graphene para analytics
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt              # Dependencias Python
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                    # Imagen Docker del servicio
‚îú‚îÄ‚îÄ üìÅ docs/                          # üìö Documentaci√≥n Completa
‚îÇ   ‚îú‚îÄ‚îÄ API_CONTRACTS.md              # Contratos de todas las APIs
‚îÇ   ‚îú‚îÄ‚îÄ GRAPHQL_DOCUMENTATION.md      # Documentaci√≥n GraphQL detallada
‚îÇ   ‚îî‚îÄ‚îÄ POSTMAN_EXAMPLES.md           # Ejemplos y colecciones de pruebas
‚îú‚îÄ‚îÄ üìÑ docker-compose.yml             # Orquestaci√≥n de todos los servicios
‚îú‚îÄ‚îÄ üìÑ README.md                      # üìñ Esta documentaci√≥n
‚îú‚îÄ‚îÄ üìÑ PROJECT_DESIGN.md              # Dise√±o y arquitectura del sistema
‚îú‚îÄ‚îÄ üìÑ ROADMAP.md                     # Roadmap de desarrollo
‚îî‚îÄ‚îÄ üìÑ .gitignore                     # Archivos ignorados por Git
```

### üõ†Ô∏è Herramientas de Desarrollo Recomendadas

#### IDEs y Editores
- **Visual Studio Code** con extensiones:
  - GraphQL
  - Docker
  - REST Client
  - Python
  - Node.js

#### Herramientas de Testing
- **Postman/Insomnia**: Para testing de APIs
- **GraphQL Playground**: Para testing GraphQL
- **curl**: Para pruebas r√°pidas desde terminal

#### Monitoreo y Debugging
- **Docker Desktop**: Para gesti√≥n visual de contenedores
- **Logs**: `docker-compose logs -f`
- **Health Checks**: Endpoints `/health` en todos los servicios

### üöÄ Workflow de Desarrollo

1. **Desarrollo Local**:
   ```bash
   # Iniciar servicios individuales para desarrollo
   cd user-service && npm run dev
   cd product-service && python main.py
   ```

2. **Testing con Docker**:
   ```bash
   # Construir y probar cambios
   docker-compose up --build
   ```

3. **Debugging**:
   ```bash
   # Ver logs espec√≠ficos
   docker-compose logs -f user-service
   ```

## üîß Soluci√≥n de Problemas (Troubleshooting)

### Problemas Comunes y Soluciones

#### üê≥ Problemas con Docker

**Error: Puerto ya en uso**
```bash
# Verificar qu√© est√° usando el puerto
lsof -i :3000

# Matar proceso si es necesario
sudo kill -9 <PID>

# O cambiar puertos en docker-compose.yml
```

**Error: Servicios no pueden comunicarse**
```bash
# Verificar red de Docker
docker network ls
docker network inspect p5_default

# Reiniciar servicios
docker-compose down && docker-compose up
```

**Error: Falta de memoria/recursos**
```bash
# Limpiar recursos Docker
docker system prune -af
docker volume prune -f
```

#### üåê Problemas de API

**Error 502 Bad Gateway**
- Verificar que todos los servicios est√©n corriendo
- Revisar logs: `docker-compose logs gateway`
- Verificar URLs de servicios en variables de entorno

**Error de CORS**
- Verificar configuraci√≥n CORS en cada servicio
- Para desarrollo, usar `allow_origins=["*"]`

**Error de GraphQL**
- Verificar sintaxis de query en GraphQL Playground
- Revisar logs del servicio espec√≠fico

#### üìä Problemas de Desarrollo

**Dependencias faltantes**
```bash
# Node.js
npm install

# Python
pip install -r requirements.txt
```

**Variables de entorno**
- Verificar archivos `.env` en cada servicio
- Usar valores por defecto si no est√°n definidas

### üìã Checklist de Verificaci√≥n

- [ ] Todos los servicios responden en `/health`
- [ ] API Gateway puede acceder a todos los servicios
- [ ] GraphQL Playground funciona correctamente
- [ ] Documentaci√≥n Swagger est√° disponible
- [ ] Logs no muestran errores cr√≠ticos
- [ ] Puertos est√°n disponibles y correctos

## ‚úÖ Cumplimiento de Requisitos (Rubric)

### Criterios de Evaluaci√≥n Cubiertos

#### üèóÔ∏è Arquitectura de Microservicios (25%)
- ‚úÖ **Separaci√≥n de servicios**: 4 microservicios independientes
- ‚úÖ **Comunicaci√≥n**: REST y GraphQL implementados
- ‚úÖ **API Gateway**: Enrutamiento inteligente y proxy
- ‚úÖ **Escalabilidad**: Servicios horizontalmente escalables

#### üê≥ Containerizaci√≥n y Docker (25%)
- ‚úÖ **Dockerfiles**: Cada servicio tiene su Dockerfile optimizado
- ‚úÖ **Docker Compose**: Orquestaci√≥n completa del sistema
- ‚úÖ **Redes**: Comunicaci√≥n entre contenedores
- ‚úÖ **Variables de entorno**: Configuraci√≥n flexible

#### üîå APIs y Documentaci√≥n (25%)
- ‚úÖ **REST APIs**: User Service y Product Service completamente funcionales
- ‚úÖ **GraphQL**: Order Service y Analytics Service con esquemas completos
- ‚úÖ **Documentaci√≥n**: APIs completamente documentadas
- ‚úÖ **Testing**: Ejemplos y colecciones de pruebas

#### üíª Implementaci√≥n y Calidad (25%)
- ‚úÖ **C√≥digo limpio**: Estructura organizada y comentada
- ‚úÖ **Error handling**: Manejo consistente de errores
- ‚úÖ **Logging**: Sistema de logs implementado
- ‚úÖ **Health checks**: Monitoreo de estado de servicios